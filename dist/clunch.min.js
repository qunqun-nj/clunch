/*!
 * clunch.js - 📊📈🎉The Progressive JavaScript Interactive Picture Framework.
 * git+https://github.com/hai2007/clunch.git
 *
 * author hai2007
 *
 * version 0.1.0-alpha.0
 *
 * Copyright (c) 2020 hai2007 走一步，再走一步。
 * Released under the MIT license
 *
 * Date:Tue Nov 17 2020 11:24:21 GMT+0800 (GMT+08:00)
 */
(function(){"use strict";function o(r,t,e,n){n=n||0;var u=Math.sqrt(t*t+e*e+n*n);return[1,0,0,0,0,1,0,0,0,0,1,0,t*r/u,e*r/u,n*r/u,1]}function v(r){var t=Math.sin(r),e=Math.cos(r);return[e,t,0,0,-t,e,0,0,0,0,1,0,0,0,0,1]}function f(r,t,e,n,u,o){n=n||0;u=u||0;o=o||0;return[r,0,0,0,0,t,0,0,0,0,e,0,n-n*r,u-u*t,o-o*e,1]}function l(r,t,e,n,u,o){if(typeof r==="number"&&typeof t==="number"){if(typeof e!=="number"){e=0;n=r;u=t;o=1}else if(typeof n!=="number"||typeof u!=="number"||typeof o!=="number"){n=r;u=t;o=e;r=0;t=0;e=0}if(r==n&&t==u&&e==o)throw new Error("It's not a legitimate ray!");var i=Math.sqrt((n-r)*(n-r)+(u-t)*(u-t)),f=i!=0?(u-t)/i:1,a=i!=0?(n-r)/i:0,c=(n-r)*a+(u-t)*f,s=o-e,v=Math.sqrt(c*c+s*s),l=v!=0?s/v:1,d=v!=0?c/v:0;return[[f,l*a,a*d,0,-a,f*l,f*d,0,0,-d,l,0,t*a-r*f,e*d-r*a*l-t*f*l,-r*a*d-t*f*d-e*l,1],[f,-a,0,0,l*a,l*f,-d,0,a*d,f*d,l,0,r,t,e,1]]}else{throw new Error("a1 and b1 is required!")}}var d=function r(t,e){var n=[];for(var u=0;u<4;u++){for(var o=0;o<e.length/4;o++){n[o*4+u]=t[u]*e[o*4]+t[u+4]*e[o*4+1]+t[u+8]*e[o*4+2]+t[u+12]*e[o*4+3]}}return n};function r(r){var c=r||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var s={move:function r(t,e,n,u){c=d(o(t,e,n,u),c);return s},rotate:function r(t,e,n,u,o,i,f){var a=l(e,n,u,o,i,f);c=d(d(d(a[1],v(t)),a[0]),c);return s},scale:function r(t,e,n,u,o,i){c=d(f(t,e,n,u,o,i),c);return s},multiply:function r(t,e){c=e?d(c,t):d(t,c);return s},use:function r(t,e,n,u){n=n||0;u=u||1;var o=d(c,[t,e,n,u]);o[0]=+o[0].toFixed(7);o[1]=+o[1].toFixed(7);o[2]=+o[2].toFixed(7);o[3]=+o[3].toFixed(7);return o},value:function r(){return c}};return s}var t=undefined;t.Matrix4=r;if(module&&module.exports){module.exports=t}else{window.Clunch=t}})();